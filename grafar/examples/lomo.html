<!doctype html>

<html lang="en">
<head>
	<title>testbox</title>
</head>

<body>
	<div id = "grafar-sinxx" style = 'width: 400px; height: 200px; background: white'>
	
	<script type="text/javascript" src="../loader.js"></script>
	<script type="text/javascript">
		runGrafar(function() {
            grafar.config.minPanelWidth = 0;
            grafar.config.minPanelHeight = 0;
            grafar.config.debug = false;
            
			var panSinXX = new grafar
                    .Panel(document.getElementById('grafar-sinxx'))
                    .setAxes(['x', 'y']),
				sinxx = new grafar.Object().pin(panSinXX);
			panSinXX.camera.position.set(0, 2.6, 0);
				
			sinxx.constrain({what: 'x', maxlen: 200, as: grafar.seq(-Math.PI / 2, Math.PI / 2, 'x')})
				.constrain({what: 'y', using: 'x, t', as: function(data, l) {
					for (var i = 0; i < l; i++)
						data.y[i] = Math.sin(data.t[i]) * Math.sin(data.x[i]) / data.x[i];
				}});
            
            var t = 0;
            (function anim() {
                t += .01; 
                sinxx
                    .constrain({what: 't', maxlen: 1, as: function(data) { data.t[0] = t; }})
                    .refresh();
                window.requestAnimationFrame(anim);
            }());
		}, '../');
	</script>

	</body>
</html>